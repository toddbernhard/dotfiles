" Vundle required
set nocompatible              " be iMproved, required
filetype off                  " required
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()  " set the runtime path to include Vundle and initialize
Plugin 'gmarik/Vundle.vim' " let Vundle manage Vundle, required
" All Plugins

Bundle 'scrooloose/nerdtree'
Bundle 'groenewege/vim-less'
Plugin 'kchmck/vim-coffee-script'
Bundle 'derekwyatt/vim-scala'
Bundle 'mileszs/ack.vim'
Bundle 'myusuf3/numbers.vim'
Bundle 'kien/ctrlp.vim'

" All of your Plugins must be added before the following line
call vundle#end()            " required
filetype plugin indent on    " required
" End of Vundle


" Run mkdir ~-p /.vim/backup ~/vim/swp ~/.vim/undo
set undodir=~/.vim/undo//
set backupdir=~/.vim/backup//
set directory=~/.vim/swp//


syntax on

set nocompatible          " Who cares about VI compatability
set encoding=utf-8        " Necessary to show Unicode glyphs

set expandtab             " Replace tabs with space
set tabstop=2
set softtabstop=2

set scrolloff=4           " Scroll this many lines boyond cursor

set number                " Show line numbers
set relativenumber        " Show relative line numbers
" set laststatus=2          " Always show the statusline
" set ruler                 " Show row,col in statusline

set incsearch             " Incremental search
set ignorecase            " Ignore case in search ...
set smartcase             "  unless upper case chars occur in search string

set backspace=indent,eol,start  " Allows bs'ing across these things

" set t_Co=256
set background=dark
hi Search ctermfg=152
hi Search ctermbg=236

set wildignore+=*/target/*,*.swo,*.swp

" Map w!! to write file with sudo, when forgot to open with sudo.
cmap w!! w !sudo tee % >/dev/null

" In normal mode, map <tab> to switch tabs
nnoremap <C-I> :tabn<CR>

" In normal mode, map <shift+tab> to NERDTree
nnoremap <S-Tab> :NERDTreeToggle<CR>


" In normal mode, map <'> to CtrlP
nnoremap ' :CtrlP<CR>

" In normal mode, map <ctrl+/> to toggle search highlightling
nnoremap <C-l> :set hlsearch!<CR>

" Single semi-colon <;> maps to full on colon <:>
nnoremap ;  :

" Double semi-colon <;;> maps to Save
nnoremap ;; :w<CR>

" <q-semi> maps to Save & Quit
nnoremap q; :wq<CR>

" set omnifunc=syntaxcomplete

" "  NerdTree -- highlight current file
" Check if NERDTree is open or active
function! rc:isNERDTreeOpen()
  return exists("t:NERDTreeBufName") && (bufwinnr(t:NERDTreeBufName) != -1)
endfunction

" Call NERDTreeFind iff NERDTree is active, current window contains a modifiable
" file, and we're not in vimdiff
" from https://gist.github.com/ashwin/3c6a40b2d1245f1c5b96
function! rc:syncTree()
  if &modifiable && rc:isNERDTreeOpen() && strlen(expand('%')) > 0 && !&diff
    NERDTreeFind
    wincmd p
  endif
endfunction

" Highlight currently open buffer in NERDTree
autocmd BufEnter * call rc:syncTree()
" " End highlight current file

" Automatically strip whitespace on save
autocmd BufWritePre * :%s/\s\+$//e
